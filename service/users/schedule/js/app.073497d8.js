(function(e){function t(t){for(var a,l,o=t[0],r=t[1],c=t[2],u=0,h=[];u<o.length;u++)l=o[u],Object.prototype.hasOwnProperty.call(n,l)&&n[l]&&h.push(n[l][0]),n[l]=0;for(a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a]);d&&d(t);while(h.length)h.shift()();return i.push.apply(i,c||[]),s()}function s(){for(var e,t=0;t<i.length;t++){for(var s=i[t],a=!0,o=1;o<s.length;o++){var r=s[o];0!==n[r]&&(a=!1)}a&&(i.splice(t--,1),e=l(l.s=s[0]))}return e}var a={},n={app:0},i=[];function l(t){if(a[t])return a[t].exports;var s=a[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,l),s.l=!0,s.exports}l.m=e,l.c=a,l.d=function(e,t,s){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(l.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)l.d(s,a,function(t){return e[t]}.bind(null,a));return s},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],r=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var d=r;i.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"034f":function(e,t,s){"use strict";var a=s("85ec"),n=s.n(a);n.a},"0e9e":function(e,t,s){"use strict";var a=s("363d"),n=s.n(a);n.a},"363d":function(e,t,s){},4678:function(e,t,s){var a={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function n(e){var t=i(e);return s(t)}function i(e){if(!s.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}n.keys=function(){return Object.keys(a)},n.resolve=i,e.exports=n,n.id="4678"},"56d7":function(e,t,s){"use strict";s.r(t);s("fb6a"),s("e260"),s("e6cf"),s("cca6"),s("a79d");var a=s("2b0e"),n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"app"}},[s("MyCalendar")],1)},i=[],l=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"container-fluid"},[s("transition",{attrs:{name:"fade"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.processing,expression:"processing"}],staticStyle:{color:"#FFF",position:"fixed",right:"5px",top:"5px","border-radius":"5px",border:"1px solid #AAAAAA",background:"#B0B0B0","z-index":"9998",padding:"10px"}},[e._v("Синхронизация... ")])]),s("transition",{attrs:{name:"fade"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],staticStyle:{"padding-top":"250px",position:"fixed",top:"0",left:"0",height:"100%",width:"100%",background:"rgba(0, 0, 0, .1)","z-index":"9999"},attrs:{id:"preloader"}},[s("img",{staticStyle:{width:"80px"},attrs:{src:"assets/img/spinner-blue.gif",align:"center"}})])]),s("vue-confirm-dialog",{staticClass:"confirm-dialog"}),s("modal",{attrs:{name:"edit-schedule",width:"450",height:"auto",focusTrap:!0,adaptive:!0}},[s("div",{staticStyle:{height:"5px","border-bottom":"#2e6da4",background:"#337ab7","margin-bottom":"22px","margin-top":"-2px","padding-top":"0","border-top-left-radius":"4px","border-top-right-radius":"4px"}}),s("div",{staticClass:"container-fluid"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-lg-12 col-xs-12 col-md-12 col-sm-12"},[s("div",{staticClass:"form-horizontal"},[-1===e.element.id?s("div",{staticClass:"input-group"},[s("span",{staticClass:"input-group-addon"},[s("i",{staticClass:"glyphicon glyphicon-briefcase"})]),s("multi-select",{attrs:{options:e.calendarList,multiple:!1,"close-on-select":!0,"clear-on-select":!1,"preserve-search":!0,placeholder:"Календарь",label:"name","track-by":"id","max-height":150,"select-label":"Выбрать","hide-selected":!1,"preselect-first":!1},scopedSlots:e._u([{key:"selection",fn:function(t){var a=t.values,n=(t.search,t.isOpen);return[a.length&&!n?s("span",{staticClass:"multiselect__single"},[e._v(e._s(a.length)+" выбрано ")]):e._e()]}}],null,!1,1281543812),model:{value:e.element.form.calendar,callback:function(t){e.$set(e.element.form,"calendar",t)},expression:"element.form.calendar"}})],1):e._e(),null===e.element.form.calendar?s("div",{staticStyle:{color:"darkred","font-size":"12px","text-align":"right"}},[e._v("Обязательное поле ")]):e._e(),null!==e.element.form.calendar&&-1===e.element.id?s("div",{staticStyle:{"margin-bottom":"17px"}}):e._e(),s("div",{staticClass:"input-group"},[s("span",{staticClass:"input-group-addon"},[s("i",{staticClass:"glyphicon glyphicon-user"})]),s("multi-select",{attrs:{options:e.employees,multiple:!1,"close-on-select":!0,"clear-on-select":!1,"preserve-search":!0,placeholder:"Сотрудник",label:"name","track-by":"id","max-height":150,"select-label":"Выбрать","hide-selected":!1,"preselect-first":!1},scopedSlots:e._u([{key:"selection",fn:function(t){var a=t.values,n=(t.search,t.isOpen);return[a.length&&!n?s("span",{staticClass:"multiselect__single",staticStyle:{"-webkit-border-radius":"0px","-moz-border-radius":"0px","border-radius":"0px",border:"0"}},[e._v(e._s(a.length)+" выбрано ")]):e._e()]}}]),model:{value:e.element.form.employee,callback:function(t){e.$set(e.element.form,"employee",t)},expression:"element.form.employee"}})],1),null===e.element.form.employee?s("div",{staticStyle:{color:"darkred","font-size":"12px","text-align":"right"}},[e._v("Обязательное поле ")]):e._e(),null!==e.element.form.employee?s("div",{staticStyle:{"margin-bottom":"17px"}}):e._e(),s("div",{staticClass:"input-group",staticStyle:{"margin-bottom":"17px"}},[s("span",{staticClass:"input-group-addon"},[s("i",{staticClass:"glyphicon glyphicon-home"})]),s("multi-select",{attrs:{options:e.groups,multiple:!0,"close-on-select":!1,"clear-on-select":!1,"preserve-search":!0,placeholder:"Группы домов",label:"name","track-by":"id","max-height":250,"select-label":"Выбрать группу","hide-selected":!0,"preselect-first":!1},scopedSlots:e._u([{key:"selection",fn:function(t){var a=t.values,n=(t.search,t.isOpen);return[a.length&&!n?s("span",{staticClass:"multiselect__single",staticStyle:{"-webkit-border-radius":"0px","-moz-border-radius":"0px","border-radius":"0px",border:"0"}},[e._v(e._s(a.length)+" выбрано ")]):e._e()]}}]),model:{value:e.element.form.groups,callback:function(t){e.$set(e.element.form,"groups",t)},expression:"element.form.groups"}})],1),s("div",{staticClass:"row"},[s("div",{staticClass:"col-lg-1 col-xs-1 col-md-1 col-sm-1",staticStyle:{"margin-bottom":"10px"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.element.isAllDay,expression:"element.isAllDay"}],staticClass:"form-control",staticStyle:{height:"30px",width:"30px","border-color":"#C0C0C0"},attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.element.isAllDay)?e._i(e.element.isAllDay,null)>-1:e.element.isAllDay},on:{change:function(t){var s=e.element.isAllDay,a=t.target,n=!!a.checked;if(Array.isArray(s)){var i=null,l=e._i(s,i);a.checked?l<0&&e.$set(e.element,"isAllDay",s.concat([i])):l>-1&&e.$set(e.element,"isAllDay",s.slice(0,l).concat(s.slice(l+1)))}else e.$set(e.element,"isAllDay",n)}}})]),s("div",{staticClass:"col-lg-10 col-xs-10 col-md-10 col-sm-10",staticStyle:{"margin-bottom":"10px","padding-top":"10px"}},[s("span",{staticStyle:{float:"left",color:"#707070"}},[e._v("Весь день")])])]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-lg-6 col-xs-12 col-md-6 col-sm-6",staticStyle:{"margin-bottom":"15px"}},[s("datetime-picker",{attrs:{"pick-time":!0},model:{value:e.element.start,callback:function(t){e.$set(e.element,"start",t)},expression:"element.start"}})],1),s("div",{staticClass:"col-lg-6 col-xs-12 col-md-6 col-sm-6",staticStyle:{"margin-bottom":"15px"}},[s("datetime-picker",{attrs:{"pick-time":!0},model:{value:e.element.end,callback:function(t){e.$set(e.element,"end",t)},expression:"element.end"}})],1)]),s("div",{staticClass:"row",staticStyle:{"margin-top":"15px"}},[s("div",{staticClass:"col-lg-3 col-xs-4 col-md-3 col-sm-3"},[s("button",{staticClass:"btn btn-primary btn-block",attrs:{disabled:null===e.element.form.calendar||null===e.element.form.employee},on:{click:function(t){return e.saveSchedule(null)}}},[s("span",{staticClass:"glyphicon glyphicon-floppy-disk",staticStyle:{"font-size":"120%","margin-top":"3px"},attrs:{"aria-hidden":"true"}})])])])])])])])]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-lg-12 col-sm-12 col-xs-12 col-md-12"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-4 col-sm-4 col-lg-4 col-xs-12"},[s("div",{staticStyle:{"font-family":"Calibri","font-weight":"bold","font-size":"14pt"}},[e._v(e._s(e.viewName))])]),s("div",{staticClass:"col-sm-4 col-md-4 col-lg-4  col-xs-6"},[s("button",{staticClass:"btn btn-primary",staticStyle:{"margin-left":"3px","margin-top":"3px","margin-bottom":"3px","margin-right":"15px"},attrs:{disabled:e.isReadOnly},on:{click:function(t){return e.createModal()}}},[s("span",{staticClass:"glyphicon glyphicon-plus",attrs:{"aria-hidden":"true"}})]),s("button",{staticClass:"btn btn-primary",staticStyle:{margin:"3px"},on:{click:function(t){return e.prevView()}}},[s("span",{staticClass:"glyphicon glyphicon-chevron-left",attrs:{"aria-hidden":"true"}})]),s("button",{staticClass:"btn btn-primary",staticStyle:{margin:"3px"},on:{click:function(t){return e.today()}}},[s("span",{staticClass:"glyphicon glyphicon-time"})]),s("button",{staticClass:"btn btn-primary",staticStyle:{margin:"3px"},on:{click:function(t){return e.nextView()}}},[s("span",{staticClass:"glyphicon glyphicon-chevron-right",attrs:{"aria-hidden":"true"}})])]),s("div",{staticClass:"col-sm-4  col-md-4  col-lg-4 col-xs-6"},[s("button",{staticClass:"btn btn-primary",staticStyle:{margin:"3px"},attrs:{disabled:"day"===e.view},on:{click:function(t){return e.changeView("day")}}},[e._v("День ")]),s("button",{staticClass:"btn btn-primary",staticStyle:{margin:"3px"},attrs:{disabled:"week"===e.view},on:{click:function(t){return e.changeView("week")}}},[e._v("Неделя ")]),s("button",{staticClass:"btn btn-primary",staticStyle:{margin:"3px"},attrs:{disabled:"month"===e.view},on:{click:function(t){return e.changeView("month")}}},[e._v("Месяц ")])])])]),s("div",{staticClass:"col-sm-12 col-xs-12 col-md-12 col-lg-12",staticStyle:{overflow:"hidden"},attrs:{id:"calendar-view-block"}},[s("div",{ref:"tooltip",staticClass:"not-close-view",attrs:{id:"view-schedule",role:"tooltip"}},[s("div",{style:"background: "+e.getScheduleColor(e.element.calendarId)+"; height: 6px; width: 100%; margin-top: 0; margin-bottom: 5px; border-top-left-radius: 4px; border-top-right-radius: 4px"}),s("div",{staticStyle:{position:"absolute",top:"5px",left:"1px","font-size":"9px"}},[e._v(e._s(e.element.id))]),s("div",{staticClass:"row not-close-view",staticStyle:{padding:"5px"}},[s("div",{staticClass:"not-close-view col-sm-12 col-md-12 col-xs-12 col-lg-12",staticStyle:{"text-align":"left"}},[s("div",{staticClass:"not-close-view",staticStyle:{"font-weight":"bold","text-align":"center"}},[e._v(" "+e._s(e.element.title)+" ")]),e._v(" Группы: "),s("ol",{staticClass:"not-close-view",staticStyle:{"padding-left":"20px","text-align":"left","font-weight":"normal","font-style":"italic"}},e._l(e.element.form.groups,(function(t){return s("li",{key:t.id,staticClass:"not-close-view",staticStyle:{"font-size":"90%"}},[e._v(e._s(t.name)+" ")])})),0)]),s("div",{staticClass:"col-sm-4 col-md-4 col-xs-4 col-lg-4",staticStyle:{"padding-left":"15px","padding-right":"0"}},[s("button",{staticClass:"btn btn-primary btn-block",attrs:{disabled:e.isReadOnly,title:"Клонировать запись"},on:{click:function(t){return e.duplicateSchedule()}}},[s("span",{staticClass:"glyphicon glyphicon-duplicate"})])]),s("div",{staticClass:"col-sm-4 col-md-4 col-xs-4 col-lg-4",staticStyle:{"padding-left":"5px","padding-right":"5px"}},[s("button",{staticClass:"btn btn-primary btn-block",attrs:{disabled:e.isReadOnly,title:"Изменить запись"},on:{click:function(t){return e.editSchedule()}}},[s("span",{staticClass:"glyphicon glyphicon-edit"})])]),s("div",{staticClass:"col-sm-4 col-md-4 col-xs-4 col-lg-4",staticStyle:{"padding-left":"0","padding-right":"15px"}},[s("button",{staticClass:"btn btn-primary btn-block",attrs:{disabled:e.isReadOnly,title:"Удалить запись"},on:{click:function(t){return e.deleteSchedule(e.element)}}},[s("span",{staticClass:"\tglyphicon glyphicon-trash"})])])])]),s("calendar",{ref:"tuiCalendar",staticStyle:{"margin-bottom":"0","margin-top":"0"},attrs:{calendars:e.calendarList,schedules:e.scheduleList,view:e.view,taskView:e.taskView,scheduleView:e.scheduleView,theme:e.theme,week:e.week,month:e.month,disableDblClick:!1,isReadOnly:e.isReadOnly,template:e.template,useCreationPopup:!1,useDetailPopup:!1},on:{afterRenderSchedule:e.onAfterRenderSchedule,beforeCreateSchedule:e.onBeforeCreateSchedule,beforeUpdateSchedule:e.onBeforeUpdateSchedule,clickDayname:e.onClickDayname,clickSchedule:e.onClickSchedule}})],1)])],1)},o=[],r=(s("4160"),s("a15b"),s("45fc"),s("b0c0"),s("d3b7"),s("159b"),s("53ca")),c=(s("ad01"),s("96c9")),d=(s("6ca0"),s("d2c9"),s("c1df")),u=s.n(d),h=s("8e5f"),p=s.n(h),f=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{ref:"datetimepicker",staticClass:"input-group date"},[s("input",{staticClass:"form-control",attrs:{type:"text"},domProps:{value:e.valueFormated},on:{change:function(t){return e.update(t)}}}),e._m(0)])},m=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",{staticClass:"input-group-addon"},[s("span",{staticClass:"glyphicon glyphicon-calendar"})])}],g=s("1157"),v=s.n(g),b=(s("791f"),s("3022"),{props:["value","pickTime"],methods:{update:function(e){console.log(e.target.value);var t=u()(e.target.value,"DD.MM.YYYY HH:mm");console.log(t),this.$emit("input",t)}},computed:{valueFormated:function(){return u()(this.value).format("DD.MM.YYYY HH:mm")}},mounted:function(){var e=this;console.log(this.value);var t={locale:"ru",defaultDate:this.value};this.pickTime||(t.format="LT"),t.date=this.value,v()(this.$refs.datetimepicker).datetimepicker(t),v()(this.$refs.datetimepicker).on("dp.change",(function(t){e.$emit("input",new Date(t.date))}))}}),y=b,w=(s("9442"),s("2877")),j=Object(w["a"])(y,f,m,!1,null,"46fa398c",null),k=j.exports,_=s("39c3"),x=s("5840"),C=s.n(x);function S(e){return JSON.parse(JSON.stringify(e))}function D(e,t){var s=String(t).length-String(e).length+1;return s>0?new Array(s).join("0")+e:e}var M={components:{calendar:c["a"],"multi-select":p.a,"datetime-picker":k},computed:{viewName:function(){return"day"===this.view?u()(new Date(this.dates.start)).format("DD.MM.YYYY"):"week"===this.view?u()(new Date(this.dates.start)).format("DD.MM.YYYY")+" ~ "+u()(new Date(this.dates.end)).format("DD.MM.YYYY"):u()(new Date(this.dates.start)).format("MM.YYYY")}},watch:{},methods:{syncElement:function(e){var t=this,s=function(e){var t=this;this.$confirm({message:"Не удалось сохранить запись - ".concat(e.message),button:{yes:"OK"},callback:function(e){e&&t.loadSchedules()}})};return this.processing=!0,e.id<=0?this.$api.createSchedule({calendar_id:e.calendarId,employee_id:e.employee,groups:e.groupIds,title:e.title,start:u()(e.start).format("YYYY-MM-DD HH:mm:ss"),end:u()(e.end).format("YYYY-MM-DD HH:mm:ss"),is_all_day:e.isAllDay}).catch((function(e){throw s(e),e})).finally((function(e){return t.processing=!1,e})):this.$api.updateSchedule(e.id,{calendar_id:e.calendarId,employee_id:e.employee,groups:e.groupIds,title:e.title,start:u()(e.start).format("YYYY-MM-DD HH:mm:ss"),end:u()(e.end).format("YYYY-MM-DD HH:mm:ss"),is_all_day:e.isAllDay}).catch((function(e){throw s(e),e})).finally((function(e){return t.processing=!1,e}))},loadSchedules:function(){var e=this;this.dates.start=this.$refs.tuiCalendar.invoke("getDateRangeStart"),this.dates.end=this.$refs.tuiCalendar.invoke("getDateRangeEnd"),this.loading=!0,this.$api.getSchedules((function(t){e.scheduleList=[],t.forEach((function(t){e.scheduleList.push({id:t.id,start:new Date(t.start),end:new Date(t.end),category:"time",dueDateClass:"",title:t.title,isAllDay:t.is_all_day,calendarId:t.calendar.id,focusTrap:!1,form:{employee:t.employee,calendar:t.calendar,groups:t.groups}})}))}),u()(new Date(this.dates.start)).format("YYYY-MM-DD"),u()(new Date(this.dates.end)).format("YYYY-MM-DD")).catch((function(e){console.log(e),alert("Не удалось загрузить задачи, перезагрузите страницу")})).finally((function(){e.loading=!1}))},getScheduleById:function(e){var t=0;return this.scheduleList.some((function(s,a){if(s.id===e)return t=a,!0})),this.scheduleList[t]},getScheduleColor:function(e){var t="";return this.calendarList.some((function(s){if(s.id===e)return t=s.bgColor,!0})),t},createPopper:function(e){var t=document.querySelector("#view-schedule"),s=document.querySelector("#calendar-view-block"),a="right";"day"===this.view&&(a="bottom"),this.popper=Object(_["a"])(e,t,{placement:a,modifiers:[{name:"flip",options:{fallbackPlacements:["top","left","bottom"],padding:300,boundary:s,altBoundary:!1,flipVariations:!0}},{name:"offset",options:{offset:[0,4]}}]}),this.$refs.tooltip.setAttribute("data-show","")},getId:function(){var e=0;return this.scheduleList.forEach((function(t){var s=parseInt(t.id);s>e&&(e=s)})),1+e},duplicateSchedule:function(){var e=S(this.element);e.id=-1,this.saveSchedule(e)},editSchedule:function(){this.$modal.show("edit-schedule")},deleteSchedule:function(e){var t=this;this.$confirm({message:"Удалить запись '".concat(e.title,"'?"),button:{no:"Нет",yes:"Да"},callback:function(s){s&&t.scheduleList.some((function(s,a){if(s.id===e.id)return t.$api.deleteSchedule(s.id).catch((function(e){throw t.$confirm({message:"Не удалось удалить запись - ".concat(e.message),button:{yes:"OK"},callback:function(e){e&&t.loadSchedules()}}),e})).finally((function(){t.processing=!1})),t.scheduleList.remove(a),!0}))}})},saveSchedule:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;null===e&&(e=this.element),e.start instanceof Date?console.log("start instance of Date"):e.start instanceof C.a?console.log("start instance of TZDate"):(console.log("Unknown type of start "+Object(r["a"])(e.start)+". try convert to date"),e.start=new Date(e.start)),e.end instanceof Date?console.log("start instance of Date"):e.end instanceof C.a?console.log("start instance of TZDate"):(console.log("Unknown type of end "+Object(r["a"])(e.end)+". try convert to date"),e.end=new Date(e.end));var t=[];if("undefined"!==typeof e.form&&("undefined"!==typeof e.form.calendar&&(e.calendarId=e.form.calendar.id),"undefined"!==typeof e.form.employee&&(e.employee=e.form.employee.id),e.form.groups.forEach((function(e){t.push(e.id)})),"undefined"!==typeof e.form.employee&&"undefined"!==typeof e.form.calendar&&(e.title=e.form.calendar.name+" - "+e.form.employee.name)),e.isAllDay&&(e.start=new Date(u()(e.start).format("YYYY-MM-DD")+" 00:00:00"),e.end=new Date(u()(e.end).format("YYYY-MM-DD")+" 23:59:59")),e.groupIds=t,e.id<=0){var s=this.getId();console.log("New ID for element = "+s),this.scheduleList.push({id:s,calendarId:e.form.calendar.id,title:e.title,category:"time",dueDateClass:"",form:e.form,start:e.start,end:e.end,isAllDay:e.isAllDay})}else{var a=-1;this.scheduleList.some((function(t,s){if(t.id===e.id)return a=s,!0})),this.$refs.tuiCalendar.invoke("updateSchedule",e.id,e.calendarId,{start:e.start,end:e.end,title:e.title,isAllDay:e.isAllDay}),this.scheduleList[a]=e}return this.$modal.hide("edit-schedule"),this.syncElement(e),!0},nextView:function(){this.$refs.tuiCalendar.invoke("next"),this.loadSchedules()},prevView:function(){this.$refs.tuiCalendar.invoke("prev"),this.loadSchedules()},today:function(){this.$refs.tuiCalendar.invoke("today"),this.loadSchedules()},changeView:function(e){var t=this;this.view=e,console.log("Change view to "+e),setTimeout((function(){t.loadSchedules()}),150)},onAfterRenderSchedule:function(){},onBeforeCreateSchedule:function(e){if(console.log("Before create shedule called"),e.guide.clearGuideElement(),"month"===this.view&&"dblclick"===e.triggerEventName)return this.$refs.tuiCalendar.invoke("setDate",new Date(e.start)),void this.changeView("day");"month"!==this.view&&(new Date(e.end).getTime()/1e3-new Date(e.start).getTime()/1e3<=1800||this.createModal({start:new Date(e.start),end:new Date(e.end),isAllDay:e.isAllDay}))},onBeforeUpdateSchedule:function(e){var t=null;return this.scheduleList.some((function(s){return s.id===e.schedule.id&&(t=s,!0)})),null===t&&(console.log("Schedule not found"),alert("Error update schedule time - schedule not found in storage")),t.start=e.start,t.end=e.end,this.saveSchedule(t),!0},onClickDayname:function(e){"day"!==this.view&&(this.$refs.tuiCalendar.invoke("setDate",new Date(e.date)),this.changeView("day"))},onClickSchedule:function(e){console.log("Call onClickSchedule on id="+e.schedule.id),this.element=this.getScheduleById(e.schedule.id),this.createPopper(e.event.srcElement)},resizeHandler:function(){console.log("Call re-render"),this.$refs.tuiCalendar.invoke("render")},createModal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{start:null,end:null,isAllDay:!1};this.element={id:-1,calendarId:"",title:"",category:"time",start:new Date,end:new Date,form:{groups:[],employee:null,calendar:null},isAllDay:e.isAllDay},null!==e.start&&(this.element.start=e.start),null!==e.end&&(this.element.end=e.end),this.$modal.show("edit-schedule")}},created:function(){window.addEventListener("resize",this.resizeHandler)},destroyed:function(){window.removeEventListener("resize",this.resizeHandler)},data:function(){return{processing:!1,popper:null,groups:[],employees:[],loading:!1,element:{id:-1,calendarId:"",title:"",form:{groups:[],employee:{},calendar:{}},category:"time",start:new Date,end:new Date,focusTrap:!1,isAllDay:!1},calendarList:[],scheduleList:[],view:this.$config.calendar.defaultView,dates:{start:"",end:""},taskView:!1,scheduleView:["time","allday"],theme:{"month.dayname.height":"30px","month.dayname.borderLeft":"1px solid #ff0000","month.dayname.textAlign":"center","week.today.color":"#333","week.daygridLeft.width":"100px","week.timegridLeft.width":"100px"},week:{narrowWeekend:!1,showTimezoneCollapseButton:!1,timezonesCollapsed:!1,startDayOfWeek:1,daynames:this.$config.calendar.dayNames,hourStart:this.$config.calendar.hourStart,hourEnd:this.$config.calendar.hourEnd},month:{visibleWeeksCount:this.$config.calendar.visibleWeeksCount,startDayOfWeek:this.$config.calendar.startDayOfWeek,daynames:this.$config.calendar.dayNames},disableDblClick:!1,isReadOnly:this.$config.calendar.isReadOnly,template:{milestone:function(e){return'<span style="color:red;">TEST '.concat(e.title,"</span>")},milestoneTitle:function(){return"TASK"},timegridDisplayPrimayTime:function(e){return D(e.hour,"00")+":"+D(e.minutes,"00")},taskTitle:function(){return'<span class="tui-full-calendar-left-content">TASK</span>'},schedule:function(){return""},task:function(){},time:function(e){return"".concat(e.title)}}}},mounted:function(){var e=this;this.loading=!0,this.$api.enableWaiting(),this.$api.getGroups((function(t){e.groups=[],t.forEach((function(t){e.groups.push(t)}))})),this.$api.getCalendarTypes((function(t){e.calendarList=[],t.forEach((function(t){e.calendarList.push({id:t.id,name:t.name,color:t.colors.color,bgColor:t.colors.bgColor,dragBgColor:t.colors.dragBgColor,borderColor:t.colors.borderColor})}))})),this.$api.getEmployees((function(t){e.employees=[],t.forEach((function(t){e.employees.push(t)}))})),this.$api.waitResponses().then((function(){e.loading=!1})),this.loadSchedules(),v()("body").on("click",(function(e){v()(e.target).hasClass("tui-full-calendar-time-schedule-content")||v()(e.target).hasClass("tui-full-calendar-weekday-schedule")||v()(e.target).hasClass("tui-full-calendar-weekday-schedule-title")||v()(e.target).hasClass("not-close-view")||document.getElementById("view-schedule").removeAttribute("data-show")}))}},Y=M,A=(s("0e9e"),s("9aa7"),Object(w["a"])(Y,l,o,!1,null,null,null)),O=A.exports,$={name:"App",components:{MyCalendar:O}},z=$,E=(s("034f"),Object(w["a"])(z,n,i,!1,null,null,null)),P=E.exports,V=s("5f5b"),L=s("b1e0"),T=(s("f9e3"),s("2dd8"),s("1881")),R=s.n(T),I=s("d30b"),B=s.n(I),H=(s("96cf"),s("1da1")),N=s("bc3a"),U=s.n(N);function W(e){return F.apply(this,arguments)}function F(){return F=Object(H["a"])(regeneratorRuntime.mark((function e(t){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s="",e.next=3,U.a.get(t).then((function(e){s=e.data}));case 3:return e.abrupt("return",s);case 4:case"end":return e.stop()}}),e)}))),F.apply(this,arguments)}s("c975"),s("a434");var q=s("d4ec"),K=s("bee2"),J=s("ade3");Array.prototype.removeValue=function(){var e,t,s=arguments,a=s.length;while(a&&this.length){e=s[--a];while(-1!==(t=this.indexOf(e)))this.splice(t,1)}return this};var G=function(){function e(t){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";Object(q["a"])(this,e),Object(J["a"])(this,"_http",null),Object(J["a"])(this,"_promises",[]),Object(J["a"])(this,"_inProccessMethods",[]),Object(J["a"])(this,"_waitEnabled",!1);var a={baseURL:t,headers:{"Content-Type":"application/json","X-Auth-Key":s}};this._http=U.a.create(a)}return Object(K["a"])(e,[{key:"setToken",value:function(e){this._http.interceptors.request.use((function(t){return t.headers["X-Auth-Token"]=e,t}))}},{key:"getCalendarTypes",value:function(e){var t=this;this._inProccessMethods.push("calendar_types");var s=this._http.get("/v2/private/employees/schedule_types").then((function(s){return e(s.data.data),t._inProccessMethods.removeValue("calendar_types"),s})).finally((function(){t._inProccessMethods.removeValue("calendar_types")}));return this._waitEnabled&&this._promises.push(s),s}},{key:"getGroups",value:function(e){var t=this;this._inProccessMethods.push("groups");var s=this._http.get("/v2/private/employees/schedule_groups").then((function(s){return e(s.data.data),t._inProccessMethods.removeValue("groups"),s})).finally((function(){t._inProccessMethods.removeValue("groups")}));return this._waitEnabled&&this._promises.push(s),s}},{key:"getEmployees",value:function(e){var t=this;this._inProccessMethods.push("employees");var s=this._http.get("/v2/private/employees/responsible_list").then((function(s){return e(s.data.data),t._inProccessMethods.removeValue("employees"),s})).finally((function(){t._inProccessMethods.removeValue("employees")}));return this._waitEnabled&&this._promises.push(s),s}},{key:"getSchedules",value:function(e,t,s){var a=this;this._inProccessMethods.push("schedules");var n=this._http.get("/v2/private/employees/schedule",{params:{start:t+" 00:00:00",end:s+" 23:59:59"}}).then((function(t){return e(t.data.data),a._inProccessMethods.removeValue("schedules"),t})).finally((function(){a._inProccessMethods.removeValue("schedules")}));return this._waitEnabled&&this._promises.push(n),n}},{key:"deleteSchedule",value:function(e){var t=this;this._inProccessMethods.push("delete");var s=this._http.delete("/v2/private/employees/schedule/"+e,{}).then((function(e){return t._inProccessMethods.removeValue("delete"),e})).finally((function(){t._inProccessMethods.removeValue("delete")}));return this._waitEnabled&&this._promises.push(s),s}},{key:"createSchedule",value:function(e){var t=this;this._inProccessMethods.push("createSchedule");var s=this._http.post("/v2/private/employees/schedule",e).then((function(e){return t._inProccessMethods.removeValue("createSchedule"),e})).finally((function(e){return t._inProccessMethods.removeValue("createSchedule"),e}));return this._waitEnabled&&this._promises.push(s),s}},{key:"updateSchedule",value:function(e,t){var s=this;this._inProccessMethods.push("updateSchedule");var a=this._http.put("/v2/private/employees/schedule/"+e,t).then((function(e){return s._inProccessMethods.removeValue("updateSchedule"),e})).finally((function(e){return s._inProccessMethods.removeValue("updateSchedule"),e}));return this._waitEnabled&&this._promises.push(a),a}},{key:"getSchedule",value:function(e,t){var s=this;this._inProccessMethods.push("schedule");var a=this._http.get("/v2/private/employees/schedule/"+t,{}).then((function(t){return e(t.data),s._inProccessMethods.removeValue("schedule"),t})).finally((function(){s._inProccessMethods.removeValue("schedule")}));return this._waitEnabled&&this._promises.push(a),a}},{key:"getAction",value:function(e){var t=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._inProccessMethods.push(e);var n="/private/switcher/module/"+e+"?1=1";for(var i in s){var l=s[i];n+="&"+i+"="+l}var o=this._http.get(n).then((function(e){return null!==a&&a(e.data),e})).finally((function(){t._inProccessMethods.removeValue(e)})).catch((function(e){console.log("Catching error from getAction"),console.log(e)}));return this._waitEnabled&&this._promises.push(o),o}},{key:"enableWaiting",value:function(){return this._waitEnabled=!0,this._promises=[],this}},{key:"disableWaiting",value:function(){return this._waitEnabled=!1,this._promises=[],this}},{key:"waitResponses",value:function(){var e=Object(H["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.a.all(this._promises);case 2:return t=e.sent,this._promises=[],e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getInProccessMethods",value:function(){return this._inProccessMethods}}]),e}();function X(){document.getElementById("schedule").innerHTML='\n  <div style="text-align: center; padding-top: 250px; position: fixed; top: 0; left: 0; height: 100%; width: 100%; background:  rgba(0, 0, 0, .1); z-index: 9999">\n                <img alt=\'loading...\' style="width: 80px;" src="assets/img/spinner-blue.gif" align="center"><br>\n                App is loading...\n  </div>\n '}function Z(e){document.getElementById("schedule").innerHTML='\n     <div style="text-align: center; padding-top: 250px; position: fixed; top: 0; left: 0; height: 100%; width: 100%; background:  rgba(0, 0, 0, .1); z-index: 9999;  color: darkred">\n               <div style="font-size: 120%">Возникли ошибки при инициализации календаря, попробуйте перезагрузить страницу</div>\n               <div style="font-size: 95%">'.concat(e,"</div>\n               \n  </div>\n  ")}a["default"].use(B.a),a["default"].component("vue-confirm-dialog",B.a.default),a["default"].use(R.a),a["default"].use(V["a"]),a["default"].use(L["a"]),Date.prototype.addDays=function(e){var t=new Date(this.valueOf());return t.setDate(t.getDate()+e),t},Array.prototype.remove=function(e,t){var s=this.slice((t||e)+1||this.length);return this.length=e<0?this.length+e:e,this.push.apply(this,s)},a["default"].config.productionTip=!0,X();var Q={apiBaseURL:"https://apiv2.golden.net.ua",getTokenURL:"/users/get_token",calendar:{hourStart:6,hourEnd:22,defaultView:"week",dayNames:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],startDayOfWeek:1,visibleWeeksCount:6,isReadOnly:!1}},ee=document.getElementById("schedule"),te=ee.getAttribute("api-base-url");null!==te&&(console.log("api-base-url="+te),Q.apiBaseURL=te);var se=ee.getAttribute("get-token-url");null!==se&&(console.log("get-token-url="+se),Q.getTokenURL=se);var ae=ee.getAttribute("hour-start");null!==ae&&(Q.calendar.hourStart=1*ae);var ne=ee.getAttribute("hour-end");null!==ne&&(Q.calendar.hourEnd=1*ne);var ie=ee.getAttribute("default-view");null!==ie&&(Q.calendar.defaultView=ie);var le=ee.getAttribute("is-read-only");null!==le&&(Q.calendar.isReadOnly="true"===le||"1"===le),a["default"].prototype.$config=Q,W(Q.getTokenURL).then((function(e){console.log("userToken="+e),a["default"].prototype.$api=new G(Q.apiBaseURL,e),new a["default"]({render:function(e){return e(P)}}).$mount("#schedule")})).catch((function(e){console.log(e),Z("Ошибка получения токена - "+e.message)}))},"85ec":function(e,t,s){},9442:function(e,t,s){"use strict";var a=s("f4ac"),n=s.n(a);n.a},f4ac:function(e,t,s){}});
//# sourceMappingURL=app.073497d8.js.map